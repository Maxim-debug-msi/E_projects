#include <iostream>
#include <map>
#include <cpr/cpr.h>

int main() {
    std::map<std::string, std::string> map{};
    std::string par{};
    std::string val{};

    do{
        std::cout << "Enter parameter(enter 'get' to get request, 'post' to post request):" << std::endl;
        std::cin >> par;
        if(par != "get" && par != "post"){
            std::cout << "Enter value of parameter:" << std::endl;
            std::cin >> val;
            map.insert(std::pair<std::string, std::string>(par, val));
        }


    }while(par != "get" && par != "post");

    std::string request{"?"};

    for(std::map<std::string, std::string>::iterator  it = map.begin(); it != map.end(); it++){
        request += it->first + "=" + it->second + "&";
    }

    if(par == "get"){
        cpr::Response r = cpr::Get(cpr::Url("http://httpbin.org/get" + request));
        std::cout << r.text << std::endl;
    }
    else if(par == "post"){

        cpr::Response r = cpr::Post(cpr::Url("http://httpbin.org/post" + request));

        std::cout << r.text << std::endl;
    }
    return 0;
}
