#include <iostream>
#include <cpr/cpr.h>

int main() {
    std::string list[6];
    std::string str{};

    for(int i{}; i < 5; i += 2) {
        std::cout << "Enter parameter:" << std::endl;
        std::cin >> str;
        if(str == "get" || str == "post") break;
        else{
            list[i] = str;
            std::cout << "Enter value of parameter:" << std::endl;
            if(str == "get" || str == "post") break;
            std::cin >> str;
            list[i + 1] = str;
        }
        if(i == 4){
            std::cout << "Enter command('get' to get request, 'post' to post request):" << std::endl;
            std::cin >> str;
        }
    }

    if(str == "get"){
        cpr::Response r = cpr::Get(cpr::Url("http://httpbin.org/get?"+list[0]+"="+list[1]+"&"+list[2]+"="+list[3]
                                            +"&"+list[4]+"="+list[5]));
        std::cout << r.text << std::endl;
    }
    else if(str == "post"){
        cpr::Response r = cpr::Post(cpr::Url("http://httpbin.org/post"),
                                    cpr::Payload({{list[0].c_str(), list[1].c_str()},
                                                        {list[2].c_str(), list[3].c_str()},
                                                        {list[4].c_str(), list[5].c_str()}}));
        std::cout << r.text << std::endl;
    }
    return 0;
}
