#include <iostream>
#include <string>
#include <map>

int main() {
    std::map<std::string, int> queue;
    std::map<std::string, int>::iterator cursor;
    std::string surname;

    std::cout << "When the person arrives at the queue, "
                 "write down their last name. To call enter 'Next'. To exit enter 'exit'" << std::endl;
    do {
        std::cout << "<-";
        std::cin >> surname;

        if (surname == "Next") {
            if(queue.empty())
            {
                std::cout << "Error. Queue is empty!" << std::endl;
                return 1;
            }
           std::cout << "<-" << queue.begin()->first << std::endl;
           queue.begin()->second--;
           if(queue.begin()->second == 0)
           {
               queue.erase(queue.begin());
           }
           if(queue.empty())
           {
               std::cout << "Queue is empty. Next operation 'Next' is not possible." << std::endl;
           }
        } else {
            queue.insert(std::pair<std::string, int>(surname, 0));
            cursor = queue.find(surname);
            cursor->second++;
        }
    }while(surname != "exit");

    return 0;
}
